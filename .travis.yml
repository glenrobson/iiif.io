sudo: false

dist: precise

before_install:
  - export NOKOGIRI_USE_SYSTEM_LIBRARIES=true
  - npm install -g grunt-cli

install:
  - bundle install
  - npm install grunt grunt-html --save-dev

script: 
  - if [ "$TRAVIS_BRANCH" = "master" -a "$TRAVIS_PULL_REQUEST" = "true" ]; then gitbranch="pullrequest"; else gitbranch=$TRAVIS_BRANCH; fi
  - echo "branch $gitbranch"
  - rake ci

# environment
language: ruby
rvm:
  - "2.2.3"
jdk:
  - oraclejdk8

branches:

notifications:
  email:
    recipients:
      - "glen.robson@gmail.com"
    on_success: "change"
    on_failure: "change"
